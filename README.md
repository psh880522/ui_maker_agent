# 🎨 UI Maker Agent

UI Maker Agent는 디자인 시안 이미지를 분석하여 Lua 형식의 UI 파일을 자동으로 생성하는 도구입니다. Google AI를 활용하여 이미지의 UI 구성 요소를 인식하고, 이를 프로그래밍 가능한 형태로 변환합니다.

## ✨ 주요 기능

- 🖼️ 이미지 시안 자동 분석
- 🤖 AI 기반 UI 구성 요소 인식
- 📄 JSON 중간 형식 생성
- 🔄 Lua UI 파일 자동 변환
- 💻 CLI 인터페이스 제공

## 🚀 설치 및 설정

### 1. 프로젝트 클론 및 설치
```bash
git clone <repository-url>
cd ui_maker_agent
uv sync
```

### 2. API 키 설정

#### 방법 1: .env 파일 사용 (권장)
```bash
# .env.example을 복사하여 .env 파일 생성
cp .env.example .env

# .env 파일을 편집하여 API 키 입력
# GOOGLE_AI_API_KEY=your-google-ai-api-key-here
```

#### 방법 2: 환경 변수 설정
**Windows (PowerShell):**
```powershell
$env:GOOGLE_AI_API_KEY = "your-api-key-here"
```

**Linux/Mac:**
```bash
export GOOGLE_AI_API_KEY="your-api-key-here"
```

## 📖 사용법

### 기본 사용법
```bash
python main.py image.png
```

### 고급 사용법
```bash
# 출력 파일명 지정
python main.py design.png -o my_ui.ui

# 자세한 출력으로 실행
python main.py design.png -v

# 도움말 보기
python main.py --help
```

## 📁 프로젝트 구조

```
ui_maker_agent/
├── main.py              # 메인 실행 파일
├── src/                 # 소스 코드
│   ├── __init__.py
│   ├── agent.py         # AI 에이전트 모듈
│   └── converter.py     # JSON-Lua 변환기
├── requirements.txt     # 의존성 목록
├── .env.example        # 환경 변수 템플릿
├── .gitignore          # Git 무시 파일 목록
└── README.md           # 프로젝트 문서
```

## 🔧 기술 스택

- **Python 3.12+**: 메인 언어
- **Google Gemini AI**: 이미지 분석 및 구조화된 출력
- **Pydantic**: 데이터 검증 및 스키마
- **Pillow**: 이미지 처리
- **uv**: 패키지 관리

## 📋 지원하는 UI 요소

- `CCTouchNode`: 터치 가능한 노드
- `CCSprite`: 스프라이트 이미지
- `CCButton`: 버튼 요소
- `CCLayerColor`: 색상 레이어
- `CCStylishLabelTTF`: 스타일 텍스트 라벨

## 🎯 워크플로우

1. **이미지 업로드** → UI 디자인 시안 제공
2. **AI 분석** → Gemini가 UI 요소와 좌표 추출
3. **스키마 검증** → UINode 모델로 데이터 구조 검증
4. **Lua 변환** → JSON을 Lua 테이블 형식으로 변환
5. **파일 생성** → UILoader.lua 호환 .ui 파일 출력

## 📝 출력 예시

생성되는 .ui 파일의 구조:
```lua
-- Auto-generated UI file from image: design.png
-- Generated by UI Maker Agent

return {
    type = 'CCTouchNode';
    x = 0.000000;
    y = 0.000000;
    width = 800.000000;
    height = 600.000000;
    [1] = {
        type = 'CCSprite';
        x = 100.000000;
        y = 200.000000;
        width = 200.000000;
        height = 50.000000;
        filename = 'button_bg.png';
        var = 'btnClose';
    };
}
```

## ⚠️ 주의사항

- Google AI API 키가 필요합니다
- 지원 이미지 형식: PNG, JPG, JPEG, BMP, GIF, WEBP
- 좌표는 메인 배경을 기준으로 상대적으로 계산됩니다
- 생성된 파일은 UILoader.lua와 함께 사용해야 합니다

## 🐛 문제 해결

### API 키 오류
```
❌ 오류: GOOGLE_AI_API_KEY 환경 변수가 설정되지 않았습니다.
```
→ 환경 변수를 올바르게 설정했는지 확인하세요.

### 이미지 파일 오류
```
❌ 오류: 지원되지 않는 이미지 형식입니다.
```
→ 지원되는 이미지 형식으로 변환하세요.

## 📄 라이선스

MIT License

## 🤝 기여하기

1. Fork the repository
2. Create a feature branch
3. Commit your changes
4. Push to the branch
5. Create a Pull Request
